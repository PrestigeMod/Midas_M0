diff -ruN init.samsung/default.prop init.cm9/default.prop
--- init.samsung/default.prop	2012-06-26 22:12:47.395342657 +0300
+++ init.cm9/default.prop	2012-06-16 12:52:49.059207049 +0300
@@ -3,5 +3,5 @@
 #
 ro.secure=1
 ro.allow.mock.location=0
-ro.debuggable=0
+ro.debuggable=1
 persist.sys.usb.config=mtp,adb
diff -ruN init.samsung/init.rc init.cm9/init.rc
--- init.samsung/init.rc	2012-06-30 11:02:43.645704195 +0300
+++ init.cm9/init.rc	2012-06-16 19:00:37.000000000 +0300
@@ -8,9 +8,6 @@
     mkdir /mnt 0775 root system
 
 on init
-# Vibetonz
-    export VIBE_PIPE_PATH /dev/pipes
-    mkdir /dev/pipes 0771 shell shell
 
 sysclktz 0
 
@@ -20,13 +17,14 @@
     export PATH /sbin:/vendor/bin:/system/sbin:/system/bin:/system/xbin
     export LD_LIBRARY_PATH /vendor/lib:/system/lib
     export ANDROID_BOOTLOGO 1
+    export ANDROID_CACHE /cache
     export ANDROID_ROOT /system
     export ANDROID_ASSETS /system/app
     export ANDROID_DATA /data
     export ASEC_MOUNTPOINT /mnt/asec
     export LOOP_MOUNTPOINT /mnt/obb
-    export BOOTCLASSPATH /system/framework/core.jar:/system/framework/core-junit.jar:/system/framework/bouncycastle.jar:/system/framework/ext.jar:/system/framework/framework.jar:/system/framework/framework2.jar:/system/framework/android.policy.jar:/system/framework/services.jar:/system/framework/apache-xml.jar:/system/framework/filterfw.jar:/system/framework/sec_edm.jar:/system/framework/seccamera.jar
-#WTL_EDM
+    export BOOTCLASSPATH /system/framework/core.jar:/system/framework/core-junit.jar:/system/framework/bouncycastle.jar:/system/framework/ext.jar:/system/framework/framework.jar:/system/framework/android.policy.jar:/system/framework/services.jar:/system/framework/apache-xml.jar:/system/framework/filterfw.jar
+
 # Backward compatibility
     symlink /system/etc /etc
     symlink /sys/kernel/debug /d
@@ -42,12 +40,8 @@
 
     mkdir /system
     mkdir /data 0771 system system
-    mkdir /cache 0770 system cache
+    mkdir /cache 0771 system cache
     mkdir /config 0500 root root
-    mkdir /preload 0771 system system
-
-#add booting sound property
-    setprop audioflinger.bootsnd 1
 
     # Directory for putting things only root should see.
     mkdir /mnt/secure 0700 root root
@@ -67,20 +61,14 @@
     mkdir /mnt/obb 0700 root system
     mount tmpfs tmpfs /mnt/obb mode=0755,gid=1000
 
-    # For ntfs automounting
-    mkdir /mnt/ntfs 0755 root system
-    mount tmpfs tmpfs /mnt/ntfs mode=0755,gid=1000
-
     write /proc/sys/kernel/panic_on_oops 1
     write /proc/sys/kernel/hung_task_timeout_secs 0
     write /proc/cpu/alignment 4
-#    write /proc/sys/kernel/sched_latency_ns 10000000
-#    write /proc/sys/kernel/sched_wakeup_granularity_ns 2000000
+    write /proc/sys/kernel/sched_latency_ns 10000000
+    write /proc/sys/kernel/sched_wakeup_granularity_ns 2000000
     write /proc/sys/kernel/sched_compat_yield 1
     write /proc/sys/kernel/sched_child_runs_first 0
     write /proc/sys/kernel/randomize_va_space 2
-    # fix BUG on ./kernel/sched_rt.c 
-    write /proc/sys/kernel/sched_rt_runtime_us -1
 
 # Create cgroup mount points for process groups
     mkdir /dev/cpuctl
@@ -105,34 +93,13 @@
 # This is needed by any process that uses socket tagging.
     chmod 0644 /dev/xt_qtaguid
 
-# ko files for exfat
-    insmod /lib/modules/exfat_core.ko
-    insmod /lib/modules/exfat_fs.ko
-
-# ko files for FM Radio
-    insmod /lib/modules/Si4709_driver.ko
-
-# WFD CES Demo
-chmod 0666 /dev/graphics/fb5
-echo 5242880 /proc/sys/net/core/wrem_max
-
-
 on fs
-# mount ext4 partitions
+# mount mtd partitions
     # Mount /system rw first to give the filesystem a chance to save a checkpoint
-    mount ext4 /dev/block/mmcblk0p9 /system ro wait noatime
-
-    exec set_crypt_meta_info /dev/block/mmcblk0p12 data
-    exec sfsck /dev/block/mmcblk0p12 ext4 encryptable
-    mount ext4 /dev/block/mmcblk0p12 /data wait nosuid nodev noatime discard,noauto_da_alloc,journal_async_commit
-    exec sfsck /dev/block/mmcblk0p8 ext4
-    mount ext4 /dev/block/mmcblk0p8 /cache nosuid nodev noatime journal_async_commit
-    # SEC_DMCRYPT move mounting efs before apply_disk_policy, and set group id to system
-    mkdir /efs
-    exec sfsck /dev/block/mmcblk0p3 ext4
-    mount ext4 /dev/block/mmcblk0p3 /efs nosuid nodev noatime wait journal_async_commit
-    chown radio system /efs
-    chmod 0771 /efs
+    mount yaffs2 mtd@system /system
+    mount yaffs2 mtd@system /system ro remount
+    mount yaffs2 mtd@userdata /data nosuid nodev
+    mount yaffs2 mtd@cache /cache nosuid nodev
 
 on post-fs
     # once everything is setup, no need to modify /
@@ -140,7 +107,7 @@
 
     # We chown/chmod /cache again so because mount is run as root + defaults
     chown system cache /cache
-    chmod 0770 /cache
+    chmod 0771 /cache
 
     # This may have been created by the recovery system with odd permissions
     chown system cache /cache/recovery
@@ -156,18 +123,9 @@
     chown root system /proc/sysrq-trigger
     chmod 0220 /proc/sysrq-trigger
 
+    # create the lost+found directories, so as to enforce our permissions
     mkdir /cache/lost+found 0770 root root
 
-    # create data/gps for GPS demon
-    chown root system /dev/ttySAC1
-    chmod 0660 /dev/ttySAC1
-    chown root system /sys/class/sec/gps/GPS_PWR_EN/value
-    chmod 0664 /sys/class/sec/gps/GPS_PWR_EN/value
-    chown root system /sys/class/sec/gps/GPS_nRST/value
-    chmod 0664 /sys/class/sec/gps/GPS_nRST/value
-    mkdir /data/gps 771 system system
-    chown system system /data/gps
-
 on post-fs-data
     # We chown/chmod /data again so because mount is run as root + defaults
     chown system system /data
@@ -178,7 +136,6 @@
     # storing dumps on platforms which do not have a dedicated dump partition.
     mkdir /data/dontpanic 0750 root log
 
-
     # Collect apanic data, free resources and re-arm trigger
     copy /proc/apanic_console /data/dontpanic/apanic_console
     chown root log /data/dontpanic/apanic_console
@@ -191,7 +148,7 @@
     write /proc/apanic_console 1
 
     # create basic filesystem structure
-    mkdir /data/misc 01775 system misc
+    mkdir /data/misc 01771 system misc
     mkdir /data/misc/bluetoothd 0770 bluetooth bluetooth
     mkdir /data/misc/bluetooth 0770 system system
     mkdir /data/misc/keystore 0700 keystore keystore
@@ -199,30 +156,24 @@
     mkdir /data/misc/vpn 0770 system vpn
     mkdir /data/misc/systemkeys 0700 system system
     # give system access to wpa_supplicant.conf for backup and restore
-    mkdir /data/misc/wifi 0770 wifi system
-    mkdir /efs/wifi 0775 radio system
-    mkdir /efs/bluetooth 0775 radio system
-    mkdir /efs/imei 0775 radio system
+    mkdir /data/misc/wifi 0770 wifi wifi
     chmod 0660 /data/misc/wifi/wpa_supplicant.conf
-    mkdir /data/misc/wifi/sockets 0770 wifi wifi
-    mkdir /data/misc/dhcp 0775 dhcp dhcp
-    chown dhcp dhcp /data/misc/dhcp
     mkdir /data/local 0751 root root
     mkdir /data/local/tmp 0771 shell shell
     mkdir /data/data 0771 system system
     mkdir /data/app-private 0771 system system
     mkdir /data/app 0771 system system
     mkdir /data/property 0700 root root
-    mkdir /data/misc/radio 0775 radio system
-    mkdir /data/misc/radio/hatp 0775 radio system    
+    mkdir /data/radio 0770 radio radio
 
-    # for TRP/TIS
-    write /data/.psm.info 1
-    chown system root /data/.psm.info
-    chmod 0660 /data/.psm.info
-
-    # create dalvik-cache, so as to enforce our permissions
+    # create dalvik-cache and double-check the perms, so as to enforce our permissions
     mkdir /data/dalvik-cache 0771 system system
+    chown system system /data/dalvik-cache
+    chmod 0771 /data/dalvik-cache
+
+    mkdir /cache/dalvik-cache 0771 system system
+    chown system system /cache/dalvik-cache
+    chmod 0771 /cache/dalvik-cache
 
     # create resource-cache and double-check the perms
     mkdir /data/resource-cache 0771 system system
@@ -232,95 +183,9 @@
     # create the lost+found directories, so as to enforce our permissions
     mkdir /data/lost+found 0770 root root
 
-    #Widevine L1 CTS	
-    mkdir /data/drm 0775
-    mkdir /data/drm/IDM 0775
-    mkdir /data/drm/IDM/HTTP 0775
-    chown drm system /data/drm
-    chown drm system /data/drm/IDM
-    chown drm system /data/drm/IDM/HTTP
-    chmod 0775 /data/drm
-    chmod 0775 /data/drm/IDM
-    chmod 0775 /data/drm/IDM/HTTP
-
-    # create directory for DRM plug-ins
-    mkdir /data/drm 0774 drm drm
-
-		#SISO-PLAYREADY-CHANGES
-		#DRM directory creation
-    mkdir /system/etc/security/.drm 0775
-    chown root root /system/etc/security/.drm
-    chmod 0775 /system/etc/security/.drm
-
-    mkdir /system/etc/security/.drm/ext1 0775
-    chown root root /system/etc/security/.drm/ext1
-    chmod 0775 /system/etc/security/.drm/ext1
-
-    # Added for Playready DRM Support
-    mkdir /data/data/.drm 0775
-    chown drm system /data/data/.drm
-    chmod 0775 /data/data/.drm
-    mkdir /data/data/.drm/.playready 0775
-    chown drm system /data/data/.drm/.playready
-    chmod 0775 /data/data/.drm/.playready
-	
-    # PlayReady DRM Support 1	
-    mkdir /efs/drm 0775
-    chown drm system /efs/drm
-    chmod 0775 /efs/drm
-    mkdir /efs/drm/playready 0775
-    chown drm system /efs/drm/playready
-    chmod 0775 /efs/drm/playready
-
-
-    # PlayReady DRM Support 2
-    chown drm system /system/etc/security/.drm/bgroupcert.dat
-    chmod 0775 /system/etc/security/.drm/bgroupcert.dat
-    chown drm system /system/etc/security/.drm/devcerttemplate.dat
-    chmod 0775 /system/etc/security/.drm/devcerttemplate.dat
-    chown drm system /system/etc/security/.drm/priv.dat
-    chmod 0775 /system/etc/security/.drm/priv.dat
-    chown drm system /system/etc/security/.drm/zgpriv.dat
-    chmod 0775 /system/etc/security/.drm/zgpriv.dat
-#    copy /system/etc/security/.drm/bgroupcert.dat /efs/drm/playready/bgroupcert.dat
-#    copy /system/etc/security/.drm/devcerttemplate.dat /efs/drm/playready/devcerttemplate.dat
-#    copy /system/etc/security/.drm/priv.dat /efs/drm/playready/priv.dat
-#    copy /system/etc/security/.drm/zgpriv.dat /efs/drm/playready/zgpriv.dat
-#    copy /system/etc/security/.drm/DxDrmConfig.txt /efs/drm/playready/DxDrmConfig.txt
-
-    # PlayReady DRM Support 5
-#	mkdir /data/DxDrm 0775
-#	chown drm system /data/DxDrm
-#	chmod 0775 /data/DxDrm
-	
-	
-# systemSW.    
-# create log system
-    mkdir /data/log 0775 system log
-    chown system log /data/log
-
-    chmod 0775 /data/log
-    chmod 0775 /data/anr
-    
-
-    #Added drm folder to copy drm plugins
-    mkdir /system/lib/drm 0775
-    chown root root /system/lib/drm
-    chmod 0775 /system/lib/drm
-		#SISO-PLAYREADY-CHANGES
-
-    # DivX DRM
-    mkdir /efs/.files 0775
-    mkdir /efs/.files/.dx1 0775
-    mkdir /efs/.files/.dm33 0775
-    mkdir /efs/.files/.mp301 0775
-    chown media system /efs/.files/.dx1
-    chown media system /efs/.files/.dm33
-    chown media system /efs/.files/.mp301
-    chmod 0775 /efs/.files/.dx1
-    chmod 0775 /efs/.files/.dm33
-    chmod 0775 /efs/.files/.mp301    
-    
+    # create directory for DRM plug-ins - give drm the read/write access to
+    # the following directory.
+    mkdir /data/drm 0770 drm drm
 
     # If there is no fs-post-data action in the init.<device>.rc file, you
     # must uncomment this line, otherwise encrypted filesystems
@@ -333,62 +198,10 @@
     chown system system /sys/class/android_usb/android0/f_rndis/ethaddr
     chmod 0660 /sys/class/android_usb/android0/f_rndis/ethaddr
 
-# MTP permission
-	chmod 0660 /dev/usb_mtp_gadget
-	chown system system /dev/usb_mtp_gadget
-
-# terminal mode
-    chmod 0660 /sys/class/android_usb/android0/terminal_version
-    chown system system /sys/class/android_usb/android0/terminal_version
-
-# fota
-    mkdir /data/fota_test 0775 system log
-    chown system log /data/fota_test
-    chmod 0775 /data/fota_test
-	
-    mkdir /cache/fota 0770 system cache
-    chown system cache /cache/fota
-    chmod 0770 /cache/fota
-on boot
-
-# mobicore
-    mkdir /data/app/mcRegistry 0775 system system    
-    chmod 0777 /dev/mobicore
-# mobicore trustlets
-    copy /efs/00000000.authtokcont /data/app/mcRegistry/00000000.authtokcont
-    chown system system /data/app/mcRegistry/00000000.authtokcont
-    copy /system/app/FFFFFFFF000000000000000000000001.drbin /data/app/FFFFFFFF000000000000000000000001.drbin
-    chown system system /data/app/FFFFFFFF000000000000000000000001.drbin
-    copy /system/app/mcRegistry/00060308060501020000000000000000.tlbin /data/app/mcRegistry/00060308060501020000000000000000.tlbin
-    chown system system /data/app/mcRegistry/00060308060501020000000000000000.tlbin
-    copy /system/app/mcRegistry/07010000000000000000000000000000.tlbin /data/app/mcRegistry/07010000000000000000000000000000.tlbin
-    chown system system /data/app/mcRegistry/07010000000000000000000000000000.tlbin
-    copy /system/app/mcRegistry/ffffffff000000000000000000000003.tlbin /data/app/mcRegistry/ffffffff000000000000000000000003.tlbin
-    chown system system /data/app/mcRegistry/ffffffff000000000000000000000003.tlbin
-    copy /system/app/mcRegistry/ffffffff000000000000000000000004.tlbin /data/app/mcRegistry/ffffffff000000000000000000000004.tlbin
-    chown system system /data/app/mcRegistry/ffffffff000000000000000000000004.tlbin
-    copy /system/app/mcRegistry/ffffffff000000000000000000000005.tlbin /data/app/mcRegistry/ffffffff000000000000000000000005.tlbin
-    chown system system /data/app/mcRegistry/ffffffff000000000000000000000005.tlbin
-
-# icd
-    exec icd_check
-    chown system system /dev/icd
-    chmod 0644 /dev/icd
-    write /dev/icdr 0
-    chown system system /dev/icdr
-    chmod 0644 /dev/icdr
-    chown system system /dev/tzic
-
-# HDCP 2.x
-    mkdir /data/system/hdcp2 0775 system system
-
-# h2k permission
-    chmod 0644 /efs/redata.bin
-    chmod 0644 /efs/h2k.dat
-
-# Camera
-	mkdir /data/cfw 0775 system system
+# Include extra init file
+    import /system/etc/init.local.rc
 
+on boot
 # basic network init
     ifup lo
     hostname localhost
@@ -420,35 +233,13 @@
     chown radio system /sys/power/state
     chown radio system /sys/power/wake_lock
     chown radio system /sys/power/wake_unlock
-    chown radio system /sys/power/cpufreq_table
-    chown radio system /sys/power/cpufreq_max_limit
-    chown radio system /sys/power/cpufreq_min_limit
-    chown radio system /sys/power/mali_lock
-    chown radio system /sys/class/power_supply/battery/siop_activated
-    chown radio system /sys/devices/system/cpu/cpufreq/pegasusq/max_cpu_lock
-    chown radio system /sys/devices/system/cpu/cpufreq/pegasusq/hotplug_lock
-    chown radio system /sys/devices/system/cpu/busfreq/curr_freq
-    chown radio system /sys/module/mali/parameters/mali_dvfs_control
-    chown system radio /sys/bus/platform/devices/s5p-tmu/lot_id
     chmod 0660 /sys/power/state
     chmod 0660 /sys/power/wake_lock
     chmod 0660 /sys/power/wake_unlock
-    chmod 0660 /sys/power/cpufreq_table
-    chmod 0660 /sys/power/cpufreq_max_limit
-    chmod 0660 /sys/power/cpufreq_min_limit
-    chmod 0660 /sys/power/mali_lock
-    chmod 0660 /sys/class/power_supply/battery/siop_activated
-    chmod 0660 /sys/devices/system/cpu/cpufreq/pegasusq/max_cpu_lock
-    chmod 0660 /sys/devices/system/cpu/cpufreq/pegasusq/hotplug_lock
-    chmod 0660 /sys/devices/system/cpu/busfreq/curr_freq
-    chmod 0660 /sys/module/mali/parameters/mali_dvfs_control
-    chmod 0664 /sys/bus/platform/devices/s5p-tmu/lot_id
     chown system system /sys/class/timed_output/vibrator/enable
     chown system system /sys/class/leds/keyboard-backlight/brightness
     chown system system /sys/class/leds/lcd-backlight/brightness
-    chown system system /sys/class/backlight/panel/brightness
     chown system system /sys/class/leds/button-backlight/brightness
-    chown system system /sys/class/sec/sec_touchkey/brightness
     chown system system /sys/class/leds/jogball-backlight/brightness
     chown system system /sys/class/leds/red/brightness
     chown system system /sys/class/leds/green/brightness
@@ -472,227 +263,40 @@
     chown system system /sys/kernel/ipv4/tcp_rmem_max
     chown root radio /proc/cmdline
 
-# Audio (Earjack)
-    chown system radio /sys/class/audio/earjack/select_jack
-    chown system radio /sys/class/audio/earjack/key_state
-    chown system radio /sys/class/audio/earjack/state
-    chown media system /sys/class/audio/earjack/reselect_jack
-
-# Battery node
-    chown system radio /sys/class/power_supply/battery/batt_reset_soc
-    chown system radio /sys/class/power_supply/battery/batt_read_raw_soc
-    chown system radio /sys/class/power_supply/battery/batt_read_adj_soc
-    chown system radio /sys/class/power_supply/battery/batt_type
-    chown system radio /sys/class/power_supply/battery/batt_temp_adc
-    chown system radio /sys/class/power_supply/battery/batt_temp_aver
-    chown system radio /sys/class/power_supply/battery/batt_temp_adc_aver
-    chown system radio /sys/class/power_supply/battery/batt_vfocv
-    chown system radio /sys/class/power_supply/battery/batt_lp_charging
-    chown system radio /sys/class/power_supply/battery/batt_charging_source
-    chown system radio /sys/class/power_supply/battery/test_mode
-    chown system radio /sys/class/power_supply/battery/wc_status
-    chown system radio /sys/class/power_supply/battery/wpc_pin_state
-
-# Thermistor node
-    chown radio system /sys/devices/platform/sec-thermistor/temp_adc
-    chown radio system /sys/devices/platform/sec-thermistor/temperature
-
-# Permissions for touch
-    chown system radio /sys/class/sec/tsp/cmd
-
-# Permissions for Touchkey
-  	chown system radio /sys/class/sec/sec_touchkey/enable_disable 
-	chown system radio /sys/class/sec/sec_touchkey/touchkey_brightness
-	chown system radio /sys/class/sec/sec_touchkey/touchkey_menu
-	chown system radio /sys/class/sec/sec_touchkey/touchkey_back
-	chown system radio /sys/class/sec/sec_touchkey/touch_update
-	chown system radio /sys/class/sec/sec_touchkey/touch_version
-	chown system radio /sys/class/sec/sec_touchkey/touchkey_firm_version_panel
-	chown system radio /sys/class/sec/sec_touchkey/touchkey_firm_version_phone
-	chown system radio /sys/class/sec/sec_touchkey/touchkey_firm_update_status
-	chown system radio /sys/class/sec/sec_touchkey/touchkey_firm_update
-	chown system radio /sys/class/sec/sec_touchkey/touch_sensitivity
-	chown system radio /sys/class/sec/sec_touchkey/touchkey_threshold
-	chown system system /sys/devices/virtual/sec/sec_touchkey/brightness
-
-# Permissions for gpio_keys
-    chown radio system /sys/class/sec/sec_key/wakeup_keys 
-    write /sys/class/sec/sec_key/wakeup_keys 116,172
-
-# Permissions for Camera
-    chown system radio /sys/class/camera/rear/rear_camfw
-    chown system radio /sys/class/camera/rear/rear_camtype
-    chown system radio /sys/class/camera/rear/rear_flash
-    chown system radio /sys/class/camera/rear/isp_core
-    chown system radio /sys/class/camera/front/front_camfw
-    chown system radio /sys/class/camera/front/front_camtype
-    chown system radio /sys/class/flash/flash/flash_power
-
-# Permissions for bluetooth
-    setprop ro.bt.bdaddr_path "/efs/bluetooth/bt_addr"
-    chown bluetooth bluetooth ro.bt.bdaddr_path
-    chown bluetooth bluetooth /dev/ttySAC0
-    chmod 0600 /dev/ttySAC0
-    chmod 0660 /sys/class/rfkill/rfkill0/state
-    chown bluetooth bluetooth /sys/class/rfkill/rfkill0/state
-    chown bluetooth bluetooth /sys/class/rfkill/rfkill0/type
-
-# <Sensors & NFC>
-# Input Events
-    chown system radio /sys/class/input/input2/enable
-    chown system radio /sys/class/input/input2/poll_delay
-    chown system radio /sys/class/input/input3/enable
-    chown system radio /sys/class/input/input3/poll_delay
-    chown system radio /sys/class/input/input4/enable
-    chown system radio /sys/class/input/input4/poll_delay
-    chown system radio /sys/class/input/input5/enable
-    chown system radio /sys/class/input/input5/poll_delay
-    chown system radio /sys/class/input/input6/enable
-    chown system radio /sys/class/input/input6/poll_delay
-    chown system radio /sys/class/input/input7/enable
-    chown system radio /sys/class/input/input7/poll_delay
-    chown system radio /sys/class/input/input8/enable
-    chown system radio /sys/class/input/input8/poll_delay
-    chown system radio /sys/class/input/input9/enable
-    chown system radio /sys/class/input/input9/poll_delay
-# Accelerometer_sensor
-    chown system radio /dev/accelerometer
-    chown system radio /sys/class/sensors/accelerometer_sensor
-    chown system radio /sys/class/sensors/accelerometer_sensor/raw_data
-    chown system radio /sys/class/sensors/accelerometer_sensor/calibration
-    chown system radio /sys/class/sensors/accelerometer_sensor/reactive_alert
-    chown system radio /sys/class/sensors/accelerometer_sensor/vendor
-    chown system radio /sys/class/sensors/accelerometer_sensor/name
-# Proximity_sensor
-    chown system radio /sys/class/sensors/proximity_sensor/state
-    chown system radio /sys/class/sensors/proximity_sensor/prox_avg
-    chown system radio /sys/class/sensors/proximity_sensor/prox_cal
-    chown system radio /sys/class/sensors/proximity_sensor/vendor
-    chown system radio /sys/class/sensors/proximity_sensor/name
-    chown system radio /sys/class/sensors/proximity_sensor/prox_thresh
-# Light_sensor
-    chown system radio /sys/class/input/input7/enable
-    chown system radio /sys/class/input/input7/poll_delay
-    chown system radio /sys/class/sensors/light_sensor/lux
-    chown system radio /sys/class/sensors/light_sensor/raw_data
-    chown system radio /sys/class/sensors/light_sensor/vendor
-    chown system radio /sys/class/sensors/light_sensor/name
-# Gyro_sensor
-    chown system radio /dev/lsm330dlc_gyro_misc
-    chown system radio /sys/class/sensors/gyro_sensor/power_on
-    chown system radio /sys/class/sensors/gyro_sensor/power_off
-    chown system radio /sys/class/sensors/gyro_sensor/temperature
-    chown system radio /sys/class/sensors/gyro_sensor/selftest
-    chown system radio /sys/class/sensors/gyro_sensor/selftest_dps
-    chown system radio /sys/class/sensors/gyro_sensor/vendor
-    chown system radio /sys/class/sensors/gyro_sensor/name
-# Barometer_sensor
-    chown system radio /sys/class/input/input5/pressure_reference_level
-    chown system radio /sys/class/input/input5/temperature_reference_level
-    chown system radio /sys/class/input/input5/enable_autozero
-    chown system radio /sys/class/input/input5/compensation_param
-    chown system radio /sys/class/input/input5/reg_value
-    chown system radio /sys/class/input/input5/reg_addr
-    chown system radio /sys/class/sensors/barometer_sensor/sea_level_pressure
-    chown system radio /sys/class/sensors/barometer_sensor/vendor
-    chown system radio /sys/class/sensors/barometer_sensor/name 
-    chown system radio /sys/class/sensors/barometer_sensor/calibration 
-# Magnetic_sensor
-    chown system radio /dev/akm8975
-    chown system radio /sys/class/sensors/magnetic_sensor/raw_data
-    chown system radio /sys/class/sensors/magnetic_sensor/vendor
-    chown system radio /sys/class/sensors/magnetic_sensor/name
-# NFC
-    setprop ro.nfc.port "I2C"
-    chmod 0600 /dev/pn544
-    chown nfc nfc /dev/pn544
-
-# WIFI
-    setprop wifi.interface wlan0
-
-# Vibetonz
-    chmod 0660 /dev/tspdrv
-    chown root shell /dev/tspdrv
-
-# Permissions for LCD
-    chown system radio /sys/class/lcd/panel/lcd_power
-    chown system radio /sys/class/lcd/panel/lcd_type
-    chown system radio /sys/class/lcd/panel/device/hs_toggle
-    chown system media_rw /sys/class/lcd/panel/power_reduce
-    chown system system /sys/class/backlight/panel/auto_brightness
-    chown system system /sys/class/graphics/fb0/lcdfreq/level
-
-# Permissions for mDNIe
-    chown system media_rw /sys/class/mdnie/mdnie/mode
-    chown system media_rw /sys/class/mdnie/mdnie/outdoor
-    chown system media_rw /sys/class/mdnie/mdnie/scenario
-    chown system system /sys/class/mdnie/mdnie/negative
-
-# Switch Device
-    chown system system /sys/class/sec/switch/uart_sel
-    chown system system /sys/class/sec/switch/usb_sel
-    chown system system /sys/class/sec/switch/otg_test
-    chown system radio /sys/class/sec/switch/adc
-
-# SVC LED
-	chown system system /sys/class/sec/led/led_r
-	chown system system /sys/class/sec/led/led_g
-	chown system system /sys/class/sec/led/led_b
-
-	chown system system /sys/class/leds/led_r/brightness
-	chown system system /sys/class/leds/led_g/brightness
-	chown system system /sys/class/leds/led_b/brightness
-	chown system system /sys/class/leds/led_r/delay_on
-	chown system system /sys/class/leds/led_g/delay_on
-	chown system system /sys/class/leds/led_b/delay_on
-	chown system system /sys/class/leds/led_r/delay_off
-	chown system system /sys/class/leds/led_g/delay_off
-	chown system system /sys/class/leds/led_b/delay_off
-	chown system system /sys/class/leds/led_r/blink
-	chown system system /sys/class/leds/led_g/blink
-	chown system system /sys/class/leds/led_b/blink
-
-	chown system system /sys/class/sec/led/led_pattern
-	chown system system /sys/class/sec/led/led_blink
-	chown system system /sys/class/sec/led/led_br_lev
-
-# OTG_TEST
-    chown system radio /sys/class/host_notify/usb_otg/booster
-    chmod 0660 /sys/class/host_notify/usb_otg/booster 
-
-# for datarouter
-    chown system system /dev/dun
-    chown system system /dev/ttyGS0
-    chown system system /dev/ttyGS1
-    chown system system /dev/ttyGS2
-    chown system system /dev/ttyGS3
+    # allow system to modify cpufreq control files
+    chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
+    chmod 0664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
+    chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
+    chmod 0664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
+    chown root system /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
+    chmod 0664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
 
 # Define TCP buffer sizes for various networks
 #   ReadMin, ReadInitial, ReadMax, WriteMin, WriteInitial, WriteMax,
     setprop net.tcp.buffersize.default 4096,87380,110208,4096,16384,110208
     setprop net.tcp.buffersize.wifi    524288,1048576,2097152,262144,524288,1048576
-    setprop net.tcp.buffersize.lte     524288,1048576,2560000,262144,524288,1048576
+    setprop net.tcp.buffersize.lte     524288,1048576,2097152,262144,524288,1048576
     setprop net.tcp.buffersize.umts    4094,87380,110208,4096,16384,110208
-    setprop net.tcp.buffersize.hspa    4094,87380,704512,4096,16384,262144
-    setprop net.tcp.buffersize.hsdpa   4094,87380,704512,4096,16384,110208
-    setprop net.tcp.buffersize.hsupa   4094,87380,704512,4096,16384,262144
-    setprop net.tcp.buffersize.hspap   4094,87380,704512,4096,16384,262144
+    setprop net.tcp.buffersize.hspa    4094,87380,262144,4096,16384,262144
     setprop net.tcp.buffersize.edge    4093,26280,35040,4096,16384,35040
     setprop net.tcp.buffersize.gprs    4092,8760,11680,4096,8760,11680
 
-# wifi display
-    write /proc/sys/net/core/wmem_max   262144
+# allow system to modify ksm control files
+    chown root system /sys/kernel/mm/ksm/pages_to_scan
+    chmod 0664 /sys/kernel/mm/ksm/pages_to_scan
+    chown root system /sys/kernel/mm/ksm/sleep_millisecs
+    chmod 0664 /sys/kernel/mm/ksm/sleep_millisecs
+    chown root system /sys/kernel/mm/ksm/run
+    chmod 0664 /sys/kernel/mm/ksm/run
+    write /sys/kernel/mm/ksm/sleep_millisecs 1500
+    write /sys/kernel/mm/ksm/pages_to_scan 256
 
-# klaatu tdmb ownership
-    chown system system /dev/tdmb
-    chmod 0660 /dev/tdmb
-
-# permission for HDMI audio path
-    chown media audio /sys/class/hdmi_audio/hdmi_audio/hdmi_audio_set_ext
-    
 # Set this property so surfaceflinger is not started by system_init
     setprop system_init.startsurfaceflinger 0
 
+# Run sysinit
+    exec /system/bin/sysinit
+
     class_start core
     class_start main
 
@@ -710,8 +314,7 @@
 
 on property:vold.decrypt=trigger_post_fs_data
     trigger post-fs-data
-    setprop vold.post_fs_data_done 1 
-    
+
 on property:vold.decrypt=trigger_restart_min_framework
     class_start main
 
@@ -766,12 +369,6 @@
 on property:persist.sys.usb.config=*
     setprop sys.usb.config $persist.sys.usb.config
 
-# SISO-ANDR_PERF :: START Changing secheduler to cfq after boot complete
-on property:dev.sfbootcomplete=1
-#    write /sys/block/mmcblk0/queue/scheduler cfq
-    write /sys/power/cpufreq_min_limit -1
-#SISO-ANDR_PERF :: END
-
 ## Daemon processes to be run by init.
 ##
 service ueventd /sbin/ueventd
@@ -782,21 +379,12 @@
     class core
     console
     disabled
-    group log
-
-service console_user /system/bin/sh
-    class core
-    console
-    disabled
     user shell
-    group shell log
+    group log
 
 on property:ro.debuggable=1
     start console
 
-on property:ro.debuggable=0
-    start console_user
-
 # adbd is controlled via property triggers in init.<platform>.usb.rc
 service adbd /sbin/adbd
     class core
@@ -818,13 +406,6 @@
     restart adbd
     write /sys/class/android_usb/android0/enable 1
 
-on property:persist.sys.storage_preload=1
-    mount ext4 /dev/block/mmcblk0p10 /preload nosuid nodev noatime wait ro
-    setprop storage.preload.complete 1
-
-on property:persist.sys.storage_preload=0
-    exec /system/bin/umount /preload   
-
 service servicemanager /system/bin/servicemanager
     class core
     user system
@@ -839,7 +420,6 @@
     class core
     socket vold stream 0660 root mount
     ioprio be 2
-    socket dir_enc_report stream 0660 root mount
 
 service netd /system/bin/netd
     class main
@@ -849,60 +429,12 @@
 service debuggerd /system/bin/debuggerd
     class main
 
-# icd
-service icd /system/bin/icd
-    class main
-    user system
-    group system log
-    onrestart exec icd_check
-
-service cpboot-daemon /sbin/cbd -d
-    class main
-    user root
-    group radio cache inet misc audio sdcard_rw log
-
 service ril-daemon /system/bin/rild
     class main
     socket rild stream 660 root radio
     socket rild-debug stream 660 radio system
     user root
-    group radio cache inet misc audio sdcard_rw log
-    onrestart restart cpboot-daemon
-
-#service DR-daemon /system/bin/drexe
-#    class main
-#    user root
-#    group system radio inet net_raw
-
-service DR-daemon /system/bin/ddexe
-    class main
-    user root
-    group system radio inet net_raw
-
-service KIES-daemon /system/bin/kiesexe
-    class main
-    user root
-    group system radio inet net_raw
-
-service SMD-daemon /system/bin/smdexe
-    class main
-    user root
-    group system radio inet net_raw
-
-service DTT-daemon /system/bin/dttexe
-    class main
-    user root
-    group system radio inet net_raw
-
-service DAIG-daemon /system/bin/diagexe
-    class main
-    user root
-    group system radio inet net_raw
-    
-service mobex-daemon /system/bin/npsmobex
-    class main
-    user system
-    group system inet sdcard_rw    
+    group radio cache inet misc audio sdcard_rw qcom_oncrpc diag
 
 service surfaceflinger /system/bin/surfaceflinger
     class main
@@ -921,21 +453,14 @@
 service drm /system/bin/drmserver
     class main
     user drm
-    group system inet drmrpc sdcard_rw media_rw radio
+    group system inet drmrpc
 
 service media /system/bin/mediaserver
     class main
     user media
-    group system audio camera inet net_bt net_bt_admin net_bw_acct drmrpc sdcard_rw
+    group audio camera inet net_bt net_bt_admin net_bw_acct drmrpc
     ioprio rt 4
 
-service powersnd /system/bin/samsungpowersoundplay
-    class main
-    user media
-    group system
-    disabled
-    oneshot
-
 service bootanim /system/bin/bootanimation
     class main
     user graphics
@@ -943,69 +468,13 @@
     disabled
     oneshot
 
-service samsungani /system/bin/samsungani
-    class main
-    user graphics
-    group graphics system
-    disabled
-    oneshot
-
 service dbus /system/bin/dbus-daemon --system --nofork
     class main
     socket dbus stream 660 bluetooth bluetooth
     user bluetooth
     group bluetooth net_bt_admin
 
-service wpa_supplicant /system/bin/wpa_supplicant \
-    -Dnl80211 -iwlan0 -puse_p2p_group_interface=1 -e/data/misc/wifi/entropy.bin
-    #   we will start as root and wpa_supplicant will switch to user wifi
-    #   after setting up the capabilities required for WEXT
-    #   user wifi
-    #   group wifi inet keystore
-    class main
-    socket wpa_wlan0 dgram 660 wifi wifi
-    disabled
-    oneshot
-
-service dhcpcd_wlan0 /system/bin/dhcpcd -ABKL
-    class main
-    disabled
-    oneshot
-
-service dhcpcd_p2p /system/bin/dhcpcd -aABKL
-    class main
-    disabled
-    oneshot
-
-service iprenew_wlan0 /system/bin/dhcpcd -n
-    class main
-    disabled
-    oneshot
-
-service iprenew_p2p /system/bin/dhcpcd -n
-    class main
-    disabled
-    oneshot
-
-#for WiFi MFG(TestMode)
-service mfgloader /system/bin/mfgloader
-	class main
-	disabled
-	oneshot
-
-service wlandutservice /system/bin/wlandutservice
-	class main
-	user system
-	group wifi net_raw net_admin system inet
-	disabled
-	oneshot
-
-service macloader /system/bin/macloader
-	class main
-	oneshot
-# end of wifi
-
-service bluetoothd /system/bin/logwrapper /system/bin/bluetoothd -n -d
+service bluetoothd /system/bin/bluetoothd -n
     class main
     socket bluetooth stream 660 bluetooth bluetooth
     socket dbus_bluetooth stream 660 bluetooth bluetooth
@@ -1014,20 +483,10 @@
     group bluetooth net_bt_admin misc
     disabled
 
-# for bluetooth pan
-service dhcpcd_bnep0 /system/bin/dhcpcd -ABKL
-	class main
-	disabled
-	oneshot
-
 service installd /system/bin/installd
     class main
     socket installd stream 600 system system
 
-service flash_recovery /system/etc/install-recovery.sh
-    class main
-    oneshot
-
 service racoon /system/bin/racoon
     class main
     socket racoon stream 600 system system
@@ -1044,11 +503,6 @@
     disabled
     oneshot
 
-service dmb /system/bin/dmbserver
-    class main
-    user system
-    group radio inet misc audio camera graphics net_bt net_bt_admin sdcard_rw
-
 service keystore /system/bin/keystore /data/misc/keystore
     class main
     user keystore
@@ -1061,57 +515,13 @@
     disabled
     oneshot
 
-service gpsd /system/bin/gpsd -c /system/etc/gps.xml
-    class main
-    socket gps seqpacket 0660 gps system
-    user gps
-    group system inet sdcard_rw
-
-# Vibetonz
-service immvibed /system/bin/immvibed
-    class core
-    user shell
-    group shell
-    oneshot
-
-# TVout
-service TvoutService_C /system/bin/bintvoutservice
-     class main
-     user system
-     group graphics
-
-on property:ro.tvout.enable=false
-	stop TvoutService_C 
-	 
-#Health
-service health /system/bin/healthd
-    class main
-#     user health
-#     group system bluetooth health
-
-# mobicore
-service mcDriverDaemon /system/bin/mcDriverDaemon -r /data/app/FFFFFFFF000000000000000000000001.drbin
-    class main
-    user system
-    group system
-
-# 2011-12-08/systemsw/kyo/ bugreport is triggered by holding down volume down, volume up and power
-service bugreport /system/bin/bugmailer.sh -v
-	class main
-	disabled
-	oneshot
-	keycodes 114 115 116
-
-# service for Playready provisioning app
-service scranton_RD /system/bin/scranton_RD
-    class main
-    user root
-    disabled
-    oneshot
-
-# start for Playready provisioning app
-on property:sys.mobicoredaemon.enable=true
-    start scranton_RD
+# adb over network
+on property:service.adb.tcp.port=5555
+    stop adbd
+    start adbd
+on property:service.adb.tcp.port=-1
+    stop adbd
+    start adbd
 
 service postinit /sbin/ext/post-init.sh
 	class core
diff -ruN init.samsung/init.smdk4x12.rc init.cm9/init.smdk4x12.rc
--- init.samsung/init.smdk4x12.rc	2012-06-16 16:24:45.326765346 +0300
+++ init.cm9/init.smdk4x12.rc	2012-06-28 23:06:50.000000000 +0300
@@ -3,28 +3,368 @@
 
 on early-init
     export EXTERNAL_STORAGE /mnt/sdcard
+    export SECONDARY_STORAGE /mnt/extSdCard
+
     mkdir /mnt/sdcard 0000 system system
+    mkdir /mnt/extSdCard 0775 system system
+    mkdir /mnt/usbdisk 0775 system system
+
     # for backwards compatibility
     symlink /mnt/sdcard /sdcard
+    symlink /mnt/extSdCard /extSdCard
     symlink /efs /factory
 
-    export SECONDARY_STORAGE /mnt/extSdCard:/mnt/UsbDriveA:/mnt/UsbDriveB:/mnt/UsbDriveC:/mnt/UsbDriveD:/mnt/UsbDriveE:/mnt/UsbDriveF
-    mkdir /mnt/extSdCard 0000 system system
-    mkdir /mnt/UsbDriveA 0000 system system
-    mkdir /mnt/UsbDriveB 0000 system system
-    mkdir /mnt/UsbDriveC 0000 system system
-    mkdir /mnt/UsbDriveD 0000 system system
-    mkdir /mnt/UsbDriveE 0000 system system
-    mkdir /mnt/UsbDriveF 0000 system system
+    mkdir /efs
+
+# ko files for exfat
+    insmod /lib/modules/exfat_core.ko
+    insmod /lib/modules/exfat_fs.ko
+
+# ko files for FM Radio
+    insmod /system/lib/modules/Si4709_driver.ko
+
+on fs
+    mount ext4 /dev/block/mmcblk0p9 /system ro wait noatime
+    mount ext4 /dev/block/mmcblk0p12 /data wait nosuid nodev noatime discard,noauto_da_alloc,journal_async_commit
+    mount ext4 /dev/block/mmcblk0p8 /cache nosuid nodev noatime journal_async_commit
+    mount ext4 /dev/block/mmcblk0p3 /efs nosuid nodev noatime wait journal_async_commit
     
+    setprop ro.crypto.fuse_sdcard true
+    
+    chown radio system /efs
+    chmod 0771 /efs
+    mount tmpfs tmpfs /system/lib/modules
+    symlink /lib/modules/cifs.ko /system/lib/modules/cifs.ko
+    symlink /lib/modules/dhd.ko /system/lib/modules/dhd.ko
+    symlink /lib/modules/scsi_wait_scan.ko /system/lib/modules/scsi_wait_scan.ko
+    symlink /lib/modules/Si4709_driver.ko /system/lib/modules/Si4709_driver.ko
+    symlink /lib/modules/btlock.ko /system/lib/modules/btlock.ko
+    symlink /lib/modules/commkm.ko /system/lib/modules/commkm.ko
+    symlink /lib/modules/mvpkm.ko /system/lib/modules/mvpkm.ko
+    symlink /lib/modules/pvtcpkm.ko /system/lib/modules/pvtcpkm.ko
+    symlink /lib/modules/exfat_core.ko /system/lib/modules/exfat_core.ko
+    symlink /lib/modules/exfat_fs.ko /system/lib/modules/exfat_fs.ko
 
 on post-fs-data
      # we will remap this as /mnt/sdcard with the sdcard fuse tool
      mkdir /data/media 0775 media_rw media_rw
      chown media_rw media_rw /data/media
 
-     # Set indication (checked by vold) that we have finished this action
-     setprop vold.post_fs_data_done 1
+# data/log
+    mkdir /data/log 0775 system log
+    chown system log /data/log
+    chmod 0775 /data/log
+    chmod 0775 /data/anr
+
+    # create data/gps for GPS demon
+    chown root system /dev/ttySAC1
+    chmod 0660 /dev/ttySAC1
+    chown root system /sys/class/sec/gps/GPS_PWR_EN/value
+    chmod 0664 /sys/class/sec/gps/GPS_PWR_EN/value
+    chown root system /sys/class/sec/gps/GPS_nRST/value
+    chmod 0664 /sys/class/sec/gps/GPS_nRST/value
+    mkdir /data/gps 771 system system
+    chown system system /data/gps
+
+# icd
+    exec icd_check
+    chown system system /dev/icd
+    chmod 0644 /dev/icd
+    write /dev/icdr 0
+    chown system system /dev/icdr
+    chmod 0644 /dev/icdr
+    chown system system /dev/tzic
+
+# HDCP 2.x
+    mkdir /data/system/hdcp2 0775 system system
+
+# h2k permission
+    chmod 0644 /efs/redata.bin
+    chmod 0644 /efs/h2k.dat
+
+# Camera
+	mkdir /data/cfw 0775 system system
+    chown system radio /sys/class/camera/rear/rear_camfw
+    chown system radio /sys/class/camera/rear/rear_camtype
+    chown system radio /sys/class/camera/rear/rear_flash
+    chown system radio /sys/class/camera/rear/isp_core
+    chown system radio /sys/class/camera/front/front_camfw
+    chown system radio /sys/class/camera/front/front_camtype
+    chown system radio /sys/class/flash/flash/flash_power
+    write /data/ISP_CV 1
+
+# Permissions for bluetooth
+    setprop ro.bt.bdaddr_path "/efs/bluetooth/bt_addr"
+    chown bluetooth bluetooth ro.bt.bdaddr_path
+    chown bluetooth bluetooth /dev/ttySAC0
+    chmod 0600 /dev/ttySAC0
+    chmod 0660 /sys/class/rfkill/rfkill0/state
+    chown bluetooth bluetooth /sys/class/rfkill/rfkill0/state
+    chown bluetooth bluetooth /sys/class/rfkill/rfkill0/type
+
+# NFC
+    setprop ro.nfc.port "I2C"
+    chmod 0600 /dev/pn544
+    chown nfc nfc /dev/pn544
+    
+# Vibrator
+    chmod 0660 /dev/tspdrv
+    chown root shell /dev/tspdrv
+    chmod 0660 /sys/vibrator/pwm_val
+    chown system system /sys/vibrator/pwm_val
+
+# LED
+    chmod 0660 /sys/class/sec/led/led_fade
+    chown system system /sys/class/sec/led/led_fade
+
+# Touchkey
+    chmod 0660 /sys/class/sec/sec_touchkey/timeout
+    chown system system /sys/class/sec/sec_touchkey/timeout
+    chmod 0660 /sys/class/sec/sec_touchkey/force_disable
+    chown system system /sys/class/sec/sec_touchkey/force_disable
+
+# Camera Flash
+    chmod 0666 /sys/devices/virtual/flash/flash/flash_power
+    chown system radio /sys/devices/virtual/flash/flash/flash_power
+
+# Permissions for LCD
+    chown system radio /sys/class/lcd/panel/lcd_power
+    chown system radio /sys/class/lcd/panel/lcd_type
+    chown system radio /sys/class/lcd/panel/device/hs_toggle
+    chown system media_rw /sys/class/lcd/panel/power_reduce
+    chown system system /sys/class/backlight/panel/auto_brightness
+    chown system system /sys/class/backlight/panel/brightness
+    chown system system /sys/class/graphics/fb0/lcdfreq/level
+
+# Permissions for mDNIe
+    chown system media_rw /sys/class/mdnie/mdnie/mode
+    chown system media_rw /sys/class/mdnie/mdnie/outdoor
+    chown system media_rw /sys/class/mdnie/mdnie/scenario
+    chown system system /sys/class/mdnie/mdnie/negative
+    write /sys/class/mdnie/mdnie/scenario 0
+    write /sys/class/mdnie/mdnie/mode 0
+
+# Permissions for System Server and daemons.
+    chown radio system /sys/android_power/state
+    chown radio system /sys/android_power/request_state
+    chown radio system /sys/android_power/acquire_full_wake_lock
+    chown radio system /sys/android_power/acquire_partial_wake_lock
+    chown radio system /sys/android_power/release_wake_lock
+    chown radio system /sys/power/state
+    chown radio system /sys/power/wake_lock
+    chown radio system /sys/power/wake_unlock
+    chown radio system /sys/power/cpufreq_table
+    chown radio system /sys/power/cpufreq_max_limit
+    chown radio system /sys/power/cpufreq_min_limit
+    chown radio system /sys/power/mali_lock
+    chown radio system /sys/class/power_supply/battery/siop_activated
+    chown radio system /sys/devices/system/cpu/cpufreq/pegasusq/max_cpu_lock
+    chown radio system /sys/devices/system/cpu/cpufreq/pegasusq/hotplug_lock
+    chown radio system /sys/devices/system/cpu/busfreq/curr_freq
+    chown radio system /sys/module/mali/parameters/mali_dvfs_control
+    chown system radio /sys/bus/platform/devices/s5p-tmu/lot_id
+    chmod 0660 /sys/power/state
+    chmod 0660 /sys/power/wake_lock
+    chmod 0660 /sys/power/wake_unlock
+    chmod 0660 /sys/power/cpufreq_table
+    chmod 0660 /sys/power/cpufreq_max_limit
+    chmod 0660 /sys/power/cpufreq_min_limit
+    chmod 0660 /sys/power/mali_lock
+    chmod 0660 /sys/class/power_supply/battery/siop_activated
+    chmod 0660 /sys/devices/system/cpu/cpufreq/pegasusq/max_cpu_lock
+    chmod 0660 /sys/devices/system/cpu/cpufreq/pegasusq/hotplug_lock
+    chmod 0660 /sys/devices/system/cpu/busfreq/curr_freq
+    chmod 0660 /sys/module/mali/parameters/mali_dvfs_control
+    chmod 0664 /sys/bus/platform/devices/s5p-tmu/lot_id
+    chown system system /sys/class/timed_output/vibrator/enable
+    chown system system /sys/class/leds/keyboard-backlight/brightness
+    chown system system /sys/class/leds/lcd-backlight/brightness
+    chown system system /sys/class/backlight/panel/brightness
+    chown system system /sys/class/leds/button-backlight/brightness
+    chown system system /sys/class/sec/sec_touchkey/brightness
+    chown system system /sys/class/leds/jogball-backlight/brightness
+    chown system system /sys/class/leds/red/brightness
+    chown system system /sys/class/leds/green/brightness
+    chown system system /sys/class/leds/blue/brightness
+    chown system system /sys/class/leds/red/device/grpfreq
+    chown system system /sys/class/leds/red/device/grppwm
+    chown system system /sys/class/leds/red/device/blink
+    chown system system /sys/class/leds/red/brightness
+    chown system system /sys/class/leds/green/brightness
+    chown system system /sys/class/leds/blue/brightness
+    chown system system /sys/class/leds/red/device/grpfreq
+    chown system system /sys/class/leds/red/device/grppwm
+    chown system system /sys/class/leds/red/device/blink
+    chown system system /sys/class/timed_output/vibrator/enable
+    chown system system /sys/module/sco/parameters/disable_esco
+    chown system system /sys/kernel/ipv4/tcp_wmem_min
+    chown system system /sys/kernel/ipv4/tcp_wmem_def
+    chown system system /sys/kernel/ipv4/tcp_wmem_max
+    chown system system /sys/kernel/ipv4/tcp_rmem_min
+    chown system system /sys/kernel/ipv4/tcp_rmem_def
+    chown system system /sys/kernel/ipv4/tcp_rmem_max
+    chown root radio /proc/cmdline
+
+# Audio (Earjack)
+    chown system radio /sys/class/audio/earjack/select_jack
+    chown system radio /sys/class/audio/earjack/key_state
+    chown system radio /sys/class/audio/earjack/state
+    chown media system /sys/class/audio/earjack/reselect_jack
+
+# Battery node
+    chown system radio /sys/class/power_supply/battery/batt_reset_soc
+    chown system radio /sys/class/power_supply/battery/batt_read_raw_soc
+    chown system radio /sys/class/power_supply/battery/batt_read_adj_soc
+    chown system radio /sys/class/power_supply/battery/batt_type
+    chown system radio /sys/class/power_supply/battery/batt_temp_adc
+    chown system radio /sys/class/power_supply/battery/batt_temp_aver
+    chown system radio /sys/class/power_supply/battery/batt_temp_adc_aver
+    chown system radio /sys/class/power_supply/battery/batt_vfocv
+    chown system radio /sys/class/power_supply/battery/batt_lp_charging
+    chown system radio /sys/class/power_supply/battery/batt_charging_source
+    chown system radio /sys/class/power_supply/battery/test_mode
+    chown system radio /sys/class/power_supply/battery/wc_status
+    chown system radio /sys/class/power_supply/battery/wpc_pin_state
+
+# Thermistor node
+    chown radio system /sys/devices/platform/sec-thermistor/temp_adc
+    chown radio system /sys/devices/platform/sec-thermistor/temperature
+
+# Permissions for touch
+    chown system radio /sys/class/sec/tsp/cmd
+
+# Permissions for Touchkey
+  	chown system radio /sys/class/sec/sec_touchkey/enable_disable 
+	chown system radio /sys/class/sec/sec_touchkey/touchkey_brightness
+	chown system radio /sys/class/sec/sec_touchkey/touchkey_menu
+	chown system radio /sys/class/sec/sec_touchkey/touchkey_back
+	chown system radio /sys/class/sec/sec_touchkey/touch_update
+	chown system radio /sys/class/sec/sec_touchkey/touch_version
+	chown system radio /sys/class/sec/sec_touchkey/touchkey_firm_version_panel
+	chown system radio /sys/class/sec/sec_touchkey/touchkey_firm_version_phone
+	chown system radio /sys/class/sec/sec_touchkey/touchkey_firm_update_status
+	chown system radio /sys/class/sec/sec_touchkey/touchkey_firm_update
+	chown system radio /sys/class/sec/sec_touchkey/touch_sensitivity
+	chown system radio /sys/class/sec/sec_touchkey/touchkey_threshold
+	chown system system /sys/devices/virtual/sec/sec_touchkey/brightness
+
+# Permissions for gpio_keys
+    chown radio system /sys/class/sec/sec_key/wakeup_keys 
+    write /sys/class/sec/sec_key/wakeup_keys 116,172
+
+# Switch Device
+    chown system system /sys/class/sec/switch/uart_sel
+    chown system system /sys/class/sec/switch/usb_sel
+    chown system system /sys/class/sec/switch/otg_test
+    chown system radio /sys/class/sec/switch/adc
+
+# SVC LED
+	chown system system /sys/class/sec/led/led_r
+	chown system system /sys/class/sec/led/led_g
+	chown system system /sys/class/sec/led/led_b
+
+	chown system system /sys/class/leds/led_r/brightness
+	chown system system /sys/class/leds/led_g/brightness
+	chown system system /sys/class/leds/led_b/brightness
+	chown system system /sys/class/leds/led_r/delay_on
+	chown system system /sys/class/leds/led_g/delay_on
+	chown system system /sys/class/leds/led_b/delay_on
+	chown system system /sys/class/leds/led_r/delay_off
+	chown system system /sys/class/leds/led_g/delay_off
+	chown system system /sys/class/leds/led_b/delay_off
+	chown system system /sys/class/leds/led_r/blink
+	chown system system /sys/class/leds/led_g/blink
+	chown system system /sys/class/leds/led_b/blink
+
+	chown system system /sys/class/sec/led/led_pattern
+	chown system system /sys/class/sec/led/led_blink
+	chown system system /sys/class/sec/led/led_br_lev
+
+# <Sensors & NFC>
+# Input Events
+    chown system radio /sys/class/input/input2/enable
+    chown system radio /sys/class/input/input2/poll_delay
+    chown system radio /sys/class/input/input3/enable
+    chown system radio /sys/class/input/input3/poll_delay
+    chown system radio /sys/class/input/input4/enable
+    chown system radio /sys/class/input/input4/poll_delay
+    chown system radio /sys/class/input/input5/enable
+    chown system radio /sys/class/input/input5/poll_delay
+    chown system radio /sys/class/input/input6/enable
+    chown system radio /sys/class/input/input6/poll_delay
+    chown system radio /sys/class/input/input7/enable
+    chown system radio /sys/class/input/input7/poll_delay
+    chown system radio /sys/class/input/input8/enable
+    chown system radio /sys/class/input/input8/poll_delay
+    chown system radio /sys/class/input/input9/enable
+    chown system radio /sys/class/input/input9/poll_delay
+# Accelerometer_sensor
+    chown system radio /dev/accelerometer
+    chown system radio /sys/class/sensors/accelerometer_sensor
+    chown system radio /sys/class/sensors/accelerometer_sensor/raw_data
+    chown system radio /sys/class/sensors/accelerometer_sensor/calibration
+    chown system radio /sys/class/sensors/accelerometer_sensor/reactive_alert
+    chown system radio /sys/class/sensors/accelerometer_sensor/vendor
+    chown system radio /sys/class/sensors/accelerometer_sensor/name
+# Proximity_sensor
+    chown system radio /sys/class/sensors/proximity_sensor/state
+    chown system radio /sys/class/sensors/proximity_sensor/prox_avg
+    chown system radio /sys/class/sensors/proximity_sensor/prox_cal
+    chown system radio /sys/class/sensors/proximity_sensor/vendor
+    chown system radio /sys/class/sensors/proximity_sensor/name
+    chown system radio /sys/class/sensors/proximity_sensor/prox_thresh
+# Light_sensor
+    chown system radio /sys/class/input/input7/enable
+    chown system radio /sys/class/input/input7/poll_delay
+    chown system radio /sys/class/sensors/light_sensor/lux
+    chown system radio /sys/class/sensors/light_sensor/raw_data
+    chown system radio /sys/class/sensors/light_sensor/vendor
+    chown system radio /sys/class/sensors/light_sensor/name
+# Gyro_sensor
+    chown system radio /dev/lsm330dlc_gyro_misc
+    chown system radio /sys/class/sensors/gyro_sensor/power_on
+    chown system radio /sys/class/sensors/gyro_sensor/power_off
+    chown system radio /sys/class/sensors/gyro_sensor/temperature
+    chown system radio /sys/class/sensors/gyro_sensor/selftest
+    chown system radio /sys/class/sensors/gyro_sensor/selftest_dps
+    chown system radio /sys/class/sensors/gyro_sensor/vendor
+    chown system radio /sys/class/sensors/gyro_sensor/name
+# Barometer_sensor
+    chown system radio /sys/class/input/input5/pressure_reference_level
+    chown system radio /sys/class/input/input5/temperature_reference_level
+    chown system radio /sys/class/input/input5/enable_autozero
+    chown system radio /sys/class/input/input5/compensation_param
+    chown system radio /sys/class/input/input5/reg_value
+    chown system radio /sys/class/input/input5/reg_addr
+    chown system radio /sys/class/sensors/barometer_sensor/sea_level_pressure
+    chown system radio /sys/class/sensors/barometer_sensor/vendor
+    chown system radio /sys/class/sensors/barometer_sensor/name 
+    chown system radio /sys/class/sensors/barometer_sensor/calibration 
+# Magnetic_sensor
+    chown system radio /dev/akm8975
+    chown system radio /sys/class/sensors/magnetic_sensor/raw_data
+    chown system radio /sys/class/sensors/magnetic_sensor/vendor
+    chown system radio /sys/class/sensors/magnetic_sensor/name
+
+# for datarouter
+    chown system system /dev/dun
+    chown system system /dev/ttyGS0
+    chown system system /dev/ttyGS1
+    chown system system /dev/ttyGS2
+    chown system system /dev/ttyGS3
+
+# for wifi
+    mkdir /data/misc/wifi/sockets 0770 wifi wifi
+    mkdir /data/misc/dhcp 0775 dhcp dhcp
+    chown dhcp dhcp /data/misc/dhcp
+
+# for TRP/TIS
+    write /data/.psm.info 1
+    chown system root /data/.psm.info
+    chmod 0660 /data/.psm.info
+
+    # Set indication (checked by vold) that we have finished this action
+    setprop vold.post_fs_data_done 1
 
 on boot
     mount debugfs /sys/kernel/debug /sys/kernel/debug
@@ -32,6 +372,7 @@
     setprop ro.build.product smdk4x12
     setprop ro.product.device smdk4x12
     setprop ro.radio.noril yes
+    setprop wifi.interface wlan0
 
 # fake some battery state
     setprop status.battery.state Slow
@@ -39,6 +380,9 @@
     setprop status.battery.level_raw  50
     setprop status.battery.level_scale 9
 
+# wifi display
+    write /proc/sys/net/core/wmem_max   262144
+
     # Set permission for Widevine DRM temporarily
     chmod 0777 /dev/s5p-smem
     rm /data/app/tlcd_sock
@@ -79,8 +423,78 @@
 service sdcard /system/bin/sdcard /data/media 1023 1023
     class late_start
 
-service notified_event /system/bin/notified_event
+# icd
+service icd /system/bin/icd
     class main
     user system
-    group system
-    socket notified_event stream 0660 root system
+    group system log
+    onrestart exec icd_check
+
+service cpboot-daemon /sbin/cbd -d
+    class main
+    user root
+    group radio cache inet misc audio sdcard_rw log
+
+service wpa_supplicant /system/bin/wpa_supplicant \
+    -Dnl80211 -iwlan0 -puse_p2p_group_interface=1 -e/data/misc/wifi/entropy.bin
+    #   we will start as root and wpa_supplicant will switch to user wifi
+    #   after setting up the capabilities required for WEXT
+    #   user wifi
+    #   group wifi inet keystore
+    class main
+    socket wpa_wlan0 dgram 660 wifi wifi
+    disabled
+    oneshot
+
+service dhcpcd_wlan0 /system/bin/dhcpcd -ABKL
+    class main
+    disabled
+    oneshot
+
+service dhcpcd_p2p /system/bin/dhcpcd -aABKL
+    class main
+    disabled
+    oneshot
+
+service dhcpcd_bnep0 /system/bin/dhcpcd -ABKL
+	class main
+	disabled
+	oneshot
+
+service iprenew_wlan0 /system/bin/dhcpcd -n
+    class main
+    disabled
+    oneshot
+
+service iprenew_p2p /system/bin/dhcpcd -n
+    class main
+    disabled
+    oneshot
+
+service iprenew_bnep0 /system/bin/dhcpcd -n
+	class main
+	disabled
+	oneshot
+
+service macloader /system/bin/macloader
+    class main
+    oneshot
+
+# GPS
+service gpsd /system/bin/gpsd -c /system/etc/gps.xml
+    class main
+    socket gps seqpacket 0660 gps system
+    user gps
+    group system inet sdcard_rw
+
+service dmb /system/bin/dmbserver
+    class main
+    user system
+    group radio inet misc audio camera graphics net_bt net_bt_admin sdcard_rw
+
+# TVout
+service TvoutService_C /system/bin/bintvoutservice
+     class main
+     user system
+     group graphics
+
diff -ruN init.samsung/lpm.rc init.cm9/lpm.rc
--- init.samsung/lpm.rc	2012-06-16 13:10:12.351170810 +0300
+++ init.cm9/lpm.rc	2012-06-19 19:03:09.000000000 +0300
@@ -2,7 +2,6 @@
     start ueventd
 
 on init
-
     export PATH /sbin:/vendor/bin:/system/sbin:/system/bin:/system/xbin
     export LD_LIBRARY_PATH /vendor/lib:/system/lib
     export ANDROID_ROOT /system
@@ -23,14 +22,10 @@
     #mount /tmp /tmp tmpfs   
 
 on early-fs
-	insmod /lib/modules/vibrator.ko
- 
     mount ext4 /dev/block/mmcblk0p9 /system ro wait noatime
-    exec sfsck /dev/block/mmcblk0p12 ext4
     mount ext4 /dev/block/mmcblk0p12 /data wait nosuid nodev noatime discard,noauto_da_alloc,journal_async_commit
 
 	mkdir /data/log 0777
-
 	chmod 0666 /dev/log/radio
 	chmod 0666 /dev/log/main
 	chmod 0666 /dev/log/event    
@@ -52,21 +47,20 @@
 
 service debuggerd /system/bin/debuggerd
 
-	service ueventd /sbin/ueventd
-    	critical
+service ueventd /sbin/ueventd
+    critical
 
-#service console /bin/sh
 service console /system/bin/sh
-	console
+    console
 
 service playlpm /system/bin/playlpm
-    	user root
+    user root
 
 service immvibed /system/bin/immvibed 
-	oneshot
+    oneshot
 
 service lpmkey /system/bin/lpmkey
-    	user root
+    user root
 
 # adbd is controlled by the persist.service.adb.enable system property
 service adbd /sbin/adbd
diff -ruN init.samsung/ueventd.rc init.cm9/ueventd.rc
--- init.samsung/ueventd.rc	2012-06-16 13:10:12.351170810 +0300
+++ init.cm9/ueventd.rc	2012-06-16 12:52:49.063207049 +0300
@@ -38,7 +38,7 @@
 /dev/adsp/*               0660   system     audio
 /dev/snd/*                0660   system     audio
 /dev/mt9t013              0660   system     system
-/dev/msm_camera/*         0660   system     system
+/dev/msm_camera/*         0660   system     camera
 /dev/akm8976_daemon       0640   compass    system
 /dev/akm8976_aot          0640   compass    system
 /dev/akm8973_daemon       0640   compass    system
@@ -71,7 +71,6 @@
 /dev/mtp_usb              0660   root       mtp
 /dev/usb_accessory        0660   root       usb
 /dev/tun                  0660   system     vpn
-/dev/usb/lp*              0660   system     usb
 
 # CDMA radio interface MUX
 /dev/ts0710mux*           0640   radio      radio
diff -ruN init.samsung/ueventd.smdk4x12.rc init.cm9/ueventd.smdk4x12.rc
--- init.samsung/ueventd.smdk4x12.rc	2012-06-20 09:57:38.000000000 +0300
+++ init.cm9/ueventd.smdk4x12.rc	2012-06-17 02:37:06.000000000 +0300
@@ -2,13 +2,14 @@
 /dev/ump                  0666   system     graphics
 /dev/exynos-mem           0666   system     graphics
 /dev/ion                  0666   system     system
+/dev/s3c-mem              0666   system     graphics
 /dev/s3c-mfc              0666   system     graphics
 /dev/s5p-mfc              0666   system     graphics
-/dev/video0               0666   system     m2m
+/dev/video0               0666   system     camera
 /dev/video1               0666   system     camera
-/dev/video2               0666   system     m2m
-/dev/video3               0666   system     m2m
-/dev/video4               0666   system     m2m
+/dev/video2               0666   system     camera
+/dev/video3               0666   system     camera
+/dev/video4               0666   system     camera
 /dev/video11              0666   system     system
 /dev/video12              0666   system     system
 /dev/video16              0666   system     system
@@ -33,3 +34,6 @@
 /dev/ttySAC*	          0660	 root	 system
 
 /dev/input/*              0666   root       input
+
+# for wifi
+/dev/rfkill               0666   system     system
